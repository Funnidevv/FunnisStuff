<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Settings - PC Sandbox</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet" />
  <style>
    /* Reset */
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #0f1117 0%, #181c27 100%);
      color: #d0d4ff;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      transition: background 0.5s ease, color 0.5s ease;
    }
    a {
      color: #8ba0ff;
      text-decoration: none;
      transition: color 0.3s ease;
    }
    a:hover, a:focus {
      color: #5a70ff;
      text-decoration: underline;
      outline: none;
    }

    header {
      background: #1c2031;
      box-shadow: 0 0 20px #5a70ff88;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background 0.5s ease, box-shadow 0.5s ease;
    }
    .logo {
      font-weight: 700;
      font-size: 1.8rem;
      color: #7c8bff;
      text-shadow: 0 0 12px #7c8bff;
      user-select: none;
      transition: color 0.5s ease, text-shadow 0.5s ease;
    }

    nav a {
      font-weight: 600;
      font-size: 1rem;
      margin-left: 1.5rem;
      padding: 0.3rem 0.6rem;
      border-radius: 6px;
      box-shadow: 0 0 12px transparent;
      user-select: none;
      transition: background 0.3s ease, box-shadow 0.3s ease, color 0.3s ease;
    }
    nav a.active, nav a:focus {
      background: #5a70ff;
      box-shadow: 0 0 12px #5a70ff;
      color: #fff;
      outline: none;
    }

    main {
      flex-grow: 1;
      max-width: 720px;
      margin: 4rem auto 6rem;
      padding: 0 1rem;
      user-select: none;
      transition: color 0.5s ease;
    }

    main h1 {
      font-weight: 700;
      font-size: 2.8rem;
      margin-bottom: 1.5rem;
      color: #7c8bff;
      text-shadow: 0 0 15px #7c8bff;
      transition: color 0.5s ease, text-shadow 0.5s ease;
    }
    label {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.5rem;
      display: block;
      color: #abb2ffcc;
      transition: color 0.5s ease;
    }
    input[type="checkbox"] {
      transform: scale(1.3);
      margin-right: 10px;
      cursor: pointer;
    }
    input[type="text"], input[type="password"], select {
      width: 100%;
      padding: 10px 14px;
      font-size: 1rem;
      border-radius: 10px;
      border: none;
      background: #1c2031;
      color: #d0d4ff;
      box-shadow: inset 0 0 10px #5a70ff44;
      margin-bottom: 20px;
      transition: box-shadow 0.3s ease, background 0.5s ease, color 0.5s ease;
      font-weight: 600;
      font-family: 'Poppins', sans-serif;
      user-select: text;
    }
    input[type="text"]:focus, input[type="password"]:focus, select:focus {
      box-shadow: 0 0 12px #5a70ffcc;
      outline: none;
      background: #272c4a;
    }

    button {
      background: #5a70ff;
      border: none;
      padding: 14px 24px;
      color: white;
      font-weight: 700;
      font-size: 1.1rem;
      border-radius: 14px;
      cursor: pointer;
      box-shadow: 0 6px 20px #5a70ff88;
      transition: background 0.3s ease, transform 0.3s ease, box-shadow 0.3s ease;
      user-select: none;
    }
    button:hover {
      background: #3e50ff;
      box-shadow: 0 8px 30px #3e50ffbb;
      transform: scale(1.07);
    }

    .section {
      margin-bottom: 3rem;
    }
    .section h2 {
      font-weight: 700;
      font-size: 1.8rem;
      margin-bottom: 1.2rem;
      color: #7c8bff;
      text-shadow: 0 0 12px #7c8bff;
      transition: color 0.5s ease, text-shadow 0.5s ease;
    }

    .beta-tester {
      margin-top: 1rem;
    }

    .tester-tab {
      background: #1c2031;
      padding: 1rem;
      border-radius: 12px;
      box-shadow: 0 0 20px #5a70ff66;
      margin-top: 1rem;
      color: #d0d4ff;
      display: none;
      user-select: text;
      transition: background 0.5s ease, color 0.5s ease, box-shadow 0.5s ease;
    }
    .tester-tab.active {
      display: block;
    }

    /* Language selector styling */
    .lang-select-container {
      margin-left: auto;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #abb2ffcc;
      font-weight: 500;
      font-size: 0.95rem;
      user-select: none;
      transition: color 0.5s ease;
    }
    select#languageSelect {
      background: #2a2f48;
      border: none;
      border-radius: 6px;
      color: #abb2ff;
      padding: 0.3rem 0.7rem;
      font-weight: 600;
      font-size: 1rem;
      cursor: pointer;
      transition: background 0.3s ease, color 0.3s ease;
      user-select: none;
    }
    select#languageSelect:hover, select#languageSelect:focus {
      background: #3e50ff;
      color: white;
      outline: none;
    }

    /* Responsive */
    @media (max-width: 640px) {
      main h1 {
        font-size: 2.2rem;
      }
      button {
        width: 100%;
      }
      nav a {
        margin-left: 1rem;
        font-size: 0.9rem;
      }
    }
  </style>
</head>
<body>

  <header>
    <div class="logo">PC Sandbox</div>
    <nav>
      <a href="index.html" id="homeTab">Home</a>
      <a href="settings.html" class="active" aria-current="page" id="settingsTab">Settings</a>
    </nav>
    <div class="lang-select-container">
      <label for="languageSelect" id="languageLabel">Language:</label>
      <select id="languageSelect" aria-label="Select Language">
        <option value="en">English</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
      </select>
    </div>
  </header>

  <main>
    <h1 id="settingsTitle">Settings</h1>

    <section class="section" aria-label="General Settings">
      <h2 id="generalSettingsTitle">General</h2>
      <label>
        <input type="checkbox" id="darkModeCheckbox" />
        <span id="darkModeLabel">Enable Dark Mode</span>
      </label>
      <label for="languageSelectMain" id="languageMainLabel" style="margin-top: 15px; display:block;">
        Choose Language:
      </label>
      <select id="languageSelectMain" aria-label="Choose Language for App">
        <option value="en">English</option>
        <option value="es">Español</option>
        <option value="fr">Français</option>
      </select>
    </section>

    <section class="section" aria-label="Background Color Mode">
      <h2 id="bgModeTitle">Background Color Mode</h2>
      <select id="bgModeSelect" aria-label="Select Background Color Mode" style="width: 100%; padding: 10px; font-size: 1rem; border-radius: 10px; border: none; background: #1c2031; color: #d0d4ff; box-shadow: inset 0 0 10px #5a70ff44; font-weight: 600; font-family: 'Poppins', sans-serif; user-select: none;">
        <option value="default">Default</option>
        <option value="black">Black</option>
        <option value="dark">Dark Mode</option>
        <option value="midnight">Midnight</option>
        <option value="red">Red</option>
        <option value="lightpink">Light Pink</option>
      </select>
    </section>

    <section class="section beta-tester" aria-label="Beta Tester Access">
      <h2 id="betaTesterTitle">Beta Tester Access</h2>
      <label for="betaPassword" id="betaPasswordLabel">Enter Beta Tester Password:</label>
      <input type="password" id="betaPassword" aria-describedby="betaPasswordHelp" autocomplete="off" />
      <button id="betaSubmitBtn">Submit</button>
      <small id="betaPasswordHelp" style="display: block; margin-top: 6px; color: #8899ffcc;">
        Enter your secure password to unlock the Tester tab.
      </small>
    </section>

    <section class="section tester-tab" id="testerTab" aria-label="Tester Section">
      <h2 id="testerTitle">Tester</h2>
      <p id="testerInfo">
        Welcome to the Beta Tester area! Here you can view sneak peeks and download early versions of the game.
      </p>
      <a href="https://example.com/early-download" target="_blank" id="earlyDownloadLink" rel="noopener noreferrer">
        Download Early Version
      </a>
    </section>

  </main>

  <script>
    const translations = {
      en: {
        languageLabel: "Language:",
        settingsTitle: "Settings",
        generalSettingsTitle: "General",
        darkModeLabel: "Enable Dark Mode",
        languageMainLabel: "Choose Language:",
        betaTesterTitle: "Beta Tester Access",
        betaPasswordLabel: "Enter Beta Tester Password:",
        betaPasswordHelp: "Enter your secure password to unlock the Tester tab.",
        betaSubmitBtn: "Submit",
        testerTitle: "Tester",
        testerInfo: "Welcome to the Beta Tester area! Here you can view sneak peeks and download early versions of the game.",
        earlyDownloadLinkText: "Download Early Version",
        bgModeTitle: "Background Color Mode",
      },
      es: {
        languageLabel: "Idioma:",
        settingsTitle: "Configuración",
        generalSettingsTitle: "General",
        darkModeLabel: "Activar modo oscuro",
        languageMainLabel: "Elige idioma:",
        betaTesterTitle: "Acceso de Beta Tester",
        betaPasswordLabel: "Introduce la contraseña de Beta Tester:",
        betaPasswordHelp: "Introduce tu contraseña segura para desbloquear la pestaña Tester.",
        betaSubmitBtn: "Enviar",
        testerTitle: "Tester",
        testerInfo: "¡Bienvenido a la zona de Beta Tester! Aquí puedes ver adelantos y descargar versiones tempranas del juego.",
        earlyDownloadLinkText: "Descargar versión temprana",
        bgModeTitle: "Modo de color de fondo",
      },
      fr: {
        languageLabel: "Langue :",
        settingsTitle: "Paramètres",
        generalSettingsTitle: "Général",
        darkModeLabel: "Activer le mode sombre",
        languageMainLabel: "Choisir la langue :",
        betaTesterTitle: "Accès Beta Tester",
        betaPasswordLabel: "Entrez le mot de passe Beta Tester :",
        betaPasswordHelp: "Entrez votre mot de passe sécurisé pour déverrouiller l'onglet Tester.",
        betaSubmitBtn: "Soumettre",
        testerTitle: "Tester",
        testerInfo: "Bienvenue dans la zone Beta Tester ! Ici, vous pouvez voir des aperçus et télécharger les versions anticipées du jeu.",
        earlyDownloadLinkText: "Télécharger la version anticipée",
        bgModeTitle: "Mode couleur de fond",
      }
    };

    const betaPasswordSecret = "R9v$3X!qLp&7Zb@Ws8#FnG2YmCt^4KdJJk!45GgkGkDFPOGDhMSn1%93$xF";

    // Elements
    const languageSelectHeader = document.getElementById('languageSelect');
    const languageSelectMain = document.getElementById('languageSelectMain');
    const languageLabel = document.getElementById('languageLabel');
    const settingsTitle = document.getElementById('settingsTitle');
    const generalSettingsTitle = document.getElementById('generalSettingsTitle');
    const darkModeLabel = document.getElementById('darkModeLabel');
    const languageMainLabel = document.getElementById('languageMainLabel');
    const betaTesterTitle = document.getElementById('betaTesterTitle');
    const betaPasswordLabel = document.getElementById('betaPasswordLabel');
    const betaPasswordHelp = document.getElementById('betaPasswordHelp');
    const betaSubmitBtn = document.getElementById('betaSubmitBtn');
    const betaPasswordInput = document.getElementById('betaPassword');
    const testerTab = document.getElementById('testerTab');
    const testerTitle = document.getElementById('testerTitle');
    const testerInfo = document.getElementById('testerInfo');
    const earlyDownloadLink = document.getElementById('earlyDownloadLink');
    const darkModeCheckbox = document.getElementById('darkModeCheckbox');
    const bgModeSelect = document.getElementById('bgModeSelect');

    // Sync language selects
    function syncLanguageSelects(value) {
      languageSelectHeader.value = value;
      languageSelectMain.value = value;
    }

    // Load saved language and apply translations
    function applyLanguage(lang) {
      if (!translations[lang]) lang = 'en';
      syncLanguageSelects(lang);
      const t = translations[lang];

      languageLabel.textContent = t.languageLabel;
      settingsTitle.textContent = t.settingsTitle;
      generalSettingsTitle.textContent = t.generalSettingsTitle;
      darkModeLabel.textContent = t.darkModeLabel;
      languageMainLabel.textContent = t.languageMainLabel;
      betaTesterTitle.textContent = t.betaTesterTitle;
      betaPasswordLabel.textContent = t.betaPasswordLabel;
      betaPasswordHelp.textContent = t.betaPasswordHelp;
      betaSubmitBtn.textContent = t.betaSubmitBtn;
      testerTitle.textContent = t.testerTitle;
      testerInfo.textContent = t.testerInfo;
      earlyDownloadLink.textContent = t.earlyDownloadLinkText;
      document.getElementById('bgModeTitle').textContent = t.bgModeTitle;
    }

    // Apply theme background based on selection
    function applyBackgroundMode(mode) {
      // Reset color vars for text and backgrounds
      let bg = '';
      let textColor = '#d0d4ff';
      let headerBg = '#1c2031';
      let headerShadow = '0 0 20px #5a70ff88';
      let navActiveBg = '#5a70ff';

      switch(mode) {
        case 'black':
          bg = '#000000';
          textColor = '#e6e6e6';
          headerBg = '#111111';
          headerShadow = '0 0 20px #88888888';
          navActiveBg = '#666666';
          break;
        case 'dark':
          bg = '#121721';
          textColor = '#d0d4ff';
          headerBg = '#1c2031';
          headerShadow = '0 0 20px #5a70ff88';
          navActiveBg = '#5a70ff';
          break;
        case 'midnight':
          bg = '#0a0a0a';
          textColor = '#b0b0ff';
          headerBg = '#0d0d0d';
          headerShadow = '0 0 30px #2222ffbb';
          navActiveBg = '#2222ff';
          break;
        case 'red':
          bg = 'linear-gradient(135deg, #300000, #700000)';
          textColor = '#ffbbbb';
          headerBg = '#440000';
          headerShadow = '0 0 20px #ff4444bb';
          navActiveBg = '#ff4444';
          break;
        case 'lightpink':
          bg = 'linear-gradient(135deg, #ffdeea, #ffc2d1)';
          textColor = '#660033';
          headerBg = '#ff99bb';
          headerShadow = '0 0 20px #ff6699bb';
          navActiveBg = '#ff6699';
          break;
        case 'default':
        default:
          bg = 'linear-gradient(135deg, #0f1117 0%, #181c27 100%)';
          textColor = '#d0d4ff';
          headerBg = '#1c2031';
          headerShadow = '0 0 20px #5a70ff88';
          navActiveBg = '#5a70ff';
          break;
      }

      // Apply styles
      document.body.style.background = bg;
      document.body.style.color = textColor;
      document.querySelector('header').style.background = headerBg;
      document.querySelector('header').style.boxShadow = headerShadow;

      // Update nav active link bg color
      document.querySelectorAll('nav a').forEach(a => {
        if(a.classList.contains('active')) {
          a.style.background = navActiveBg;
          a.style.boxShadow = `0 0 12px ${navActiveBg}`;
          a.style.color = '#fff';
        } else {
          a.style.background = 'transparent';
          a.style.boxShadow = 'none';
          a.style.color = textColor;
        }
      });

      // Update other UI parts color if needed
      // e.g. inputs and buttons background can be adjusted here if desired
    }

    // Load saved settings from localStorage
    function loadSettings() {
      const lang = localStorage.getItem('language') || 'en';
      applyLanguage(lang);

      const darkMode = localStorage.getItem('darkMode') === 'true';
      darkModeCheckbox.checked = darkMode;

      const bgMode = localStorage.getItem('bgMode') || 'default';
      bgModeSelect.value = bgMode;
      applyBackgroundMode(bgMode);

      const betaAccess = localStorage.getItem('betaAccessGranted') === 'true';
      if(betaAccess) {
        testerTab.classList.add('active');
      }
    }

    // Save language to localStorage and sync selects
    function saveLanguage(lang) {
      localStorage.setItem('language', lang);
      applyLanguage(lang);
      syncLanguageSelects(lang);
    }

    // Save dark mode (for compatibility, but mostly handled by bgMode)
    function saveDarkMode(enabled) {
      localStorage.setItem('darkMode', enabled);
    }

    // Save background mode
    function saveBgMode(mode) {
      localStorage.setItem('bgMode', mode);
      applyBackgroundMode(mode);
    }

    // Event listeners
    languageSelectHeader.addEventListener('change', e => {
      saveLanguage(e.target.value);
      languageSelectMain.value = e.target.value;
    });
    languageSelectMain.addEventListener('change', e => {
      saveLanguage(e.target.value);
      languageSelectHeader.value = e.target.value;
    });

    darkModeCheckbox.addEventListener('change', e => {
      saveDarkMode(e.target.checked);
      // For legacy: if dark mode checked, set background mode to dark, else default
      if(e.target.checked) {
        bgModeSelect.value = 'dark';
        saveBgMode('dark');
      } else if (bgModeSelect.value === 'dark') {
        bgModeSelect.value = 'default';
        saveBgMode('default');
      }
    });

    bgModeSelect.addEventListener('change', e => {
      saveBgMode(e.target.value);

      // Sync darkModeCheckbox for compatibility:
      darkModeCheckbox.checked = (e.target.value === 'dark');
      saveDarkMode(darkModeCheckbox.checked);
    });

    betaSubmitBtn.addEventListener('click', () => {
      const entered = betaPasswordInput.value.trim();
      if(entered === betaPasswordSecret) {
        alert('Access granted! Welcome, Beta Tester!');
        testerTab.classList.add('active');
        localStorage.setItem('betaAccessGranted', 'true');
        betaPasswordInput.value = '';
      } else {
        alert('Incorrect password. Please try again.');
        betaPasswordInput.value = '';
      }
    });

    // Initialize UI
    loadSettings();

  </script>

</body>
</html>
